<?xml version="1.0" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>pgimag : Contour plot</title>
<link href="./css.css" type="text/css" rel="stylesheet" />
<meta name="author" content="Masahiro Tanaka"/>
<meta name="Keywords" content="Ruby,PGPLOT,NArray"/>
</head>
<body>
<h1><a name="label-0" id="label-0">Ruby/PGPLOT example: pgimag</a></h1><!-- RDLabel: "Ruby/PGPLOT example: pgimag" -->
<h3><a name="label-1" id="label-1">code</a></h3><!-- RDLabel: "code" -->
<pre>require 'narray'
require 'pgplot'
include Pgplot

# set color table
def palett
  rl = [-0.5, 0.0, 0.17, 0.33, 0.50, 0.67, 0.83, 1.0, 1.7]
  rr = [ 0.0, 0.0,  0.0,  0.0,  0.6,  1.0,  1.0, 1.0, 1.0]
  rg = [ 0.0, 0.0,  0.0,  1.0,  1.0,  1.0,  0.6, 0.0, 1.0]
  rb = [ 0.0, 0.3,  0.8,  1.0,  0.3,  0.0,  0.0, 0.0, 1.0]
  pgctab(rl, rr, rg, rb)
end

# prepare Data
nx = 64
ny = 64
x = NArray.sfloat(nx,1).indgen!(1)
y = NArray.sfloat(1,ny).indgen!(1)
f = NMath.cos( NMath.sqrt(x*(80.0/nx))*0.6 - y*16.0/(3.0*ny) ) *
    NMath.cos( x*16.0/(3.0*nx) ) +
    (x/nx - y/ny) + NMath.sin(NMath.sqrt(x**2+y**2))*0.05

# draw Image Map
pgopen
pgwnad(0.0, 1.0+nx, 0.0, 1.0+ny)
palett
pgimag(f)
pgmtxt('t',1.0,0.0,0.0,'PGIMAG, PGWEDG, and PGCTAB')

# draw Color Bar at bottom
pgsch(0.6)
pgbox('bcntsi',0.0,0,'bcntsiv',0.0,0)
pgmtxt('b',3.0,1.0,1.0,'pixel number')
pgwedg('RI', 4.0, 5.0, f.min,f.max, 'pixel value')</pre>
<h3><a name="label-2" id="label-2">output</a></h3><!-- RDLabel: "output" -->
<p><img src="pgimag.png" alt="pgimag.png"/></p>

<hr/>
<a href="./">Ruby/PGPLOT</a>
by Masahiro Tanaka


<div>Last update: May 16 2014</div>
</body>
</html>
